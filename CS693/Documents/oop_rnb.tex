\documentclass[12pt]{article}

%\usepackage{fullpage}
%\usepackage{epic}
%\usepackage{eepic}
%\usepackage{graphicx}

\usepackage{listings} % Code
\usepackage{fancyhdr} % header footer
\usepackage{xcolor}  % Color
\usepackage{mathtools} % Math

\usepackage{geometry}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }

%\newcommand{\proof}[1]{
%{\noindent {\it Proof.} {#1} \rule{2mm}{2mm} \vskip \belowdisplayskip}
%}


%\newtheorem{lemma}{Lemma}[section]
%\newtheorem{theorem}[lemma]{Theorem}
%\newtheorem{claim}[lemma]{Claim}
%\newtheorem{definition}[lemma]{Definition}
%\newtheorem{corollary}[lemma]{Corollary}

%\setlength{\oddsidemargin}{0in}
%\setlength{\topmargin}{0in}
%\setlength{\textwidth}{6.5in}
%\setlength{\textheight}{8.5in}

\cfoot{footer}

\lstset {
%language=Java,
backgroundcolor = \color{lightgray},
                   language = C++,
                   xleftmargin = 2mm,
                   framexleftmargin = 1em
%lineskip={-1.5pt}
}

%\usepackage[utf8]{inputenc}
 
 
% Information about contents section
%\title{Contents}
%\author{Rudra Nil Basu}
\date{ }
 
%\renewcommand*\contentsname{Summary}

\begin{document}

% to generate the contents page
%\maketitle
\tableofcontents

\newpage

\setlength{\fboxrule}{.5mm}\setlength{\fboxsep}{1.2mm}
\newlength{\boxlength}\setlength{\boxlength}{\textwidth}
\addtolength{\boxlength}{-4mm}
\begin{center}\framebox{\parbox{\boxlength}{\bf
CS693: Object Oriented Programming Lab \hfill 
Year: 2017
%Date: 11/10/2016
\\
%DATE
\hfill
}}\end{center}
\vspace{5mm}

\section{Display Permission}

\textbf{Problem 1} \textit{Write a program to a shell script that will read a directory name from the terminal and will display only the name
	and permission of the files}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter directory name:" direc
ls -l $direc | awk '{print $1, $9}'
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
-rw-rw-r--
-rw-rw-r--
drwxrwxr-x
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
-rw-rw-r--
116.193.143.137.html
124442-Pulse-Glass.tar.gz
16___1366x768_wallpaper_pack_by_jhasenfusphoto-d4ddjpd
16___1366x768_wallpaper_pack_by_jhasenfusphoto-d4ddjpd.zip
17017156_1892189880877953_1020699469635668422_o.jpg
171217-Breeze-GRUB2.tar.gz
240P_400K_113924551.mp4
7b0cff72-9a21-4567-8353-5d87c4696e26.html
AdbeRdr9.5.5-1_i386linux_enu.deb
android-ndk-r13b-linux-x86_64.zip
android-studio-ide-143.3101438-linux.zip
assignment-1.doc
\end{lstlisting}

\section{Maximum}

\textbf{Problem 2} \textit{Write a shell script that will find the maximum from the given three nos.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter first number:" a
echo ""
read -p "Enter second number:" b
echo ""
read -p "Enter third number:" c
echo ""
if [ $a -gt $b ]
then if [ $a -gt $c ]
then echo "$a is the greatest"
else echo "$c is the greatest"
fi
elif [ $b -gt $c ]
then echo "$b is the greatest"
else echo "$c is the greatest"
fi
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter first number:25
Enter second number:-3
Enter third number:5
25 is the greatest
\end{lstlisting}

\section{Directory checking}

\textbf{Problem 3} \textit{Write a shell script that will read a file/directory name from the terminal, check whether that
	file/directory is in the current directory. If it exists in the current directory, display whether it is file or
	directory.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter a name of directory or file:" name
echo ""
if [ -f $name ]
then echo "File is in directory"
elif [ -d $name ]
then echo "It is a sub-directory"
else echo "Doesn't exist"
fi
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter a name of directory or file:mouri
Doesn't exist
Enter a name of directory or file:exist.sh
File is in directory
Enter a name of directory or file:prog
It is a sub-directory
\end{lstlisting}

\section{Directories in sorted order}

\textbf{Problem 4} \textit{Write a shell script that will read a directory name from the terminal then it will display all the
	directories followed by the files in the sorted order.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter a direc:" direc
ls --group-directories-first $direc
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Downloaded by Variety
images
Wallpapers
Webcam
15416884_1239745149428837_1970874045_n (3rd copy).jpg
15416884_1239745149428837_1970874045_n (another copy).jpg
15416884_1239745149428837_1970874045_n (copy).jpg
15416884_1239745149428837_1970874045_n.jpg
\end{lstlisting}

\section{GCD if two numbers}

\textbf{Problem 5} \textit{Write a shell script that computes the gcd of two numbers.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
gcd()
{
read -p "Enter first: " a
read -p "Enter second number: " b
r=1
until [ $r -eq 0 ]
do
let "r= $a % $b "
a=$b
b=$r
done
echo "HCF is: "$a
}
gcd $a $b
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter first: 5
Enter second number: 25
HCF is: 5
\end{lstlisting}

\section{Fibonacci numbers}

\textbf{Problem 6} \textit{Write a shell script to generate a Fibonacci series of length 'n' with the first two nos of the series being
	3 and 5 respectively.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
fibo()
{
a=3
b=5
read -p "Enter no of terms to generate: " n
echo -n "$a "
echo -n "$b "
n=$((n-2))
until [ $n -eq 0 ]
do
c=$(($a+$b))
echo $c|bc
a=$b
b=$c
n=$((n-1))
done
echo ""
}
fibo $n
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
3 5 8 13 21 34 55 89 144 233
\end{lstlisting}

\section{Factorial}

\textbf{Problem 7} \textit{Write a shell scripts to calculate the factorial of a integer 'n'.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter a number:" a
seq -s "*" 1 $a | bc
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}Enter a number:5
120
\end{lstlisting}

\section{Sort a list of n numbers}

\textbf{Problem 8} \textit{Write a shell program to sort a list of 'n' no.}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
arr=(8 7 9)
sorted=( $( printf "%s\n" "${arr[@]}" | sort -n ) )
echo ${sorted[*]}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
7 8 9
\end{lstlisting}

\section{Change background and foreground color}

\textbf{Problem 9} \textit{Write a shell program to change the foreground and background color of terminal}\\

\textit{Code.}

\begin{lstlisting}
read -p "Enter foreground color: " foregrd
read -p "Enter background color: " bckgrd
setterm -term linux -back $bckgrd -fore $foregrd -clear
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}

\end{lstlisting}

\section{Use different options of grep command}

\textbf{Problem 10} \textit{Write a shell program to demonstrate various use of "grep" command}\\

\textit{Code.}

\begin{lstlisting}
read -p "Enter the file name: " file
read -p "Enter the pattern: " key
grep -i $key $file #prints numbers of lines ignoring case
echo ""
grep "R*" $file #prints lines where string is starting with “R”
echo ""
grep -A 3 "Rohit" $file #prints three lines after line containing “Rohit”
echo ""
grep -w "R" $file #prints
echo ""
grep -c $key $file
echo ""
grep -n $key $file
echo ""
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter the file name: inp.txt
Enter the pattern: R
Rudra doesn't like Tokon
Rohit a doesn't like tokon
Rahul doesn't like tokon
Sumitra doesn't like tokon
Rudra doesn't like Tokon
Rohit a doesn't like tokon
Debaa doesn't like tokon
Rahul doesn't like tokon
Sumitra doesn't like tokon
Supi like tokon
LOLOLOLOLOL
Rohit a doesn't like tokon
Debaa doesn't like tokon
Rahul doesn't like tokon
Sumitra doesn't like tokon
\end{lstlisting}

\section{Search from a list of n numbers}

\textbf{Problem 11} \textit{Write a shell program that will accept 'n' nos from the terminals and will search the position of a given no in the supplied nos}\\

\textit{Code.}

\begin{lstlisting}
#!/bin/bash
read -p "Enter limit of numbers: " n
flag=1
for (( i = 0; i < n; i++ )); do
read a[i]
done
read -p "Enter no to be searched: " key
for (( i = 0; i < n; i++ )); do
if [ "$key" -eq ${a[i]} ]
then
echo " Key found in " $i
flag=0
fi
done
if [ "$flag" -eq "1" ]
then
echo "not found"
fi
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter limit of numbers: 6
1 3 5 12 6 -1
Enter no to be searched: -1
Key found in 5
Enter limit of numbers: 6
1 3 5 12 6 -1
Enter no to be searched: 2
not found
\end{lstlisting}

\section{Show contents of a file}

\textbf{Problem 12} \textit{Write a shell program that will show the contents of a file}\\

\textit{Code.}

\begin{lstlisting}
read -p "Enter the file name: " file$
cat -A $file$
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter the file name:hello.txt
Hello World!
\end{lstlisting}

\section{Show only even numbers from an aray}

\textbf{Problem 13} \textit{Show only even numbers from an aray}\\

\textit{Code.}

\begin{lstlisting}
#!bin/bash
a="1 2 3 4 5 6 7 8 9 10"
for var in $a
do
even=$((var%2))
if [ "$even" -eq 0 ]
then
echo $var
fi
done
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
2 4 6 8 10
\end{lstlisting}

\section{Use pipe to demonstrate filter and grep}

\textbf{Problem 14} \textit{Use pipe to demonstrate filter and grep}\\

\textit{Code.}

\begin{lstlisting}
read -p "Enter file name: " file
read -p "Enter the key: " key
cat $file | grep -i "$key"
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
Enter file name: inp.txt
Enter the key: R
Rudra doesn't like Tokon
Rohit a doesn't like tokon
Rahul doesn't like tokon
Sumitra doesn't like tokon
\end{lstlisting}

\section{Fork}

\textbf{Problem 15 } \textit{Write a program to demonstrate forking in C}\\

\textit{Code.}

\begin{lstlisting}
#include <unistd.h>
#include <stdio.h>
int main()
{
	pid_t t;
	t = fork();
	if (t > 0) {
		printf("I am parent\n");
	} else if (t == 0) {
	printf("CHILD\n");
	} else {
		printf("ERROR\n");
	}
	printf("This line is common\n");
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
I am parent
This line is common
CHILD
This line is common
\end{lstlisting}

\section{PID}

\textbf{Problem 16} \textit{Write a program to create a child process in C and print the PID of parent and child}\\

\textit{Code.}

\begin{lstlisting}
#include <unistd.h>
#include <stdio.h>
int main()
{
	pid_t t;
	t = fork();
	if (t > 0) {
		printf("I am parent. My pid is: %d\n",getpid());
	} else if (t == 0) {
		printf("CHILD. My ppid is %d\n",getppid());
	} else {
		printf("ERROR\n");
	}
	printf("This line is common\n");
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
I am parent. My pid is: 7052
This line is common
CHILD. My ppid is 7052
This line is common
\end{lstlisting}

\section{Process Hierarchy and Zombie processes}

\textbf{Problem 17} \textit{Write a program to demonstrate zombie processes}\\

\textit{Code.}

\begin{lstlisting}
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main()
{
	pid_t t = vfork();
	if (t > 0) {
		// We are in A
		printf("In A. Pid=%d\n",getpid());
		pid_t te = vfork();
		if (te > 0) {
			printf("In A. Pid: %d, Ppid=%d\n",
			getpid(),getppid());
			// We are in A
		} else if (te == 0) {
			printf("In E. Pid= %d, PPid=%d\n",
			getpid(),getppid());
			// We are in E
		}
		exit(0);
	} else if (t == 0) {
		// We are in B
		printf("In B. Pid=%d, PPid=%d\n",getpid(),getppid());
		pid_t tee = vfork();
		if (tee > 0) {
			printf("IN B,  Pid= %d, PPid=%d\n",
			getpid(),getppid());
			// We are in B
		} else if (tee == 0) {
			// We are in C
			printf("In C  Pid= %d, PPid=%d\n",
			getpid(),getppid());
			pid_t teee = vfork();
			if (teee > 0) {
				printf("In B  Pid= %d, PPid=%d\n",
				getpid(),getppid());
				// We are in B
			} else if (teee == 0) {
				printf("In D  Pid= %d, PPid=%d\n",
				getpid(),getppid());
				// We are in D
			}
			sleep(10);
			exit(0);
		}
		sleep(10);
		exit(0);
	}
	sleep(10);
	exit(0);
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
\end{lstlisting}

\section{Process PID and PPID}

\textbf{Problem 18} \textit{Create a child process in C and print the PID of parent and child and also the PPID of child.}\\

\textit{Code.}

\begin{lstlisting}
#include <unistd.h>
#include <stdio.h>
int main()
{
		pid_t t;
		t = fork();
		printf("This is a common line\n");
		if (t > 0) {
			printf("I am parent. My pid is: %d\n",getpid());
		} else if (t == 0) {
		printf("CHILD. My pid is %d, my ppid is %d\n",getpid(), getppid());
		} else {
		printf("ERROR\n");
	}
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
This is a common line
I am parent. My pid is: 7288
This is a common line
CHILD. My pid is 7289, my ppid is 7288
\end{lstlisting}

\section{Process creation using vfork()}

\textbf{Problem 19} \textit{Create a child process in C using vfork().}\\

\textit{Code.}

\begin{lstlisting}
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
int main()
{
	pid_t t;
	t = vfork();
	if (t > 0) {
		printf("I am parent\n");
	} else if (t == 0) {
	printf("CHILD\n");
	} else {
		printf("ERROR\n");
	exit(1);
}
printf("This line is common\n");
exit(0);
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}
CHILD
This line is common
I am parent
This line is common
\end{lstlisting}


\section{Process creation using vfork()}

\textbf{Problem 20} \textit{Create a custom signal handler.}\\

\textit{Code.}

\begin{lstlisting}
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

void view_err(int);
void div_err(int);

int main()
{
	signal(SIGINT, view_err);
	signal(SIGFPE, div_err);
	//signal(SIGFPE, SIG_DFL); /* This throws the default value*/
	//while(1);
	float a = 1/0;
}

void view_err(int sig)
{
	printf("\nRecvd %d\n",sig);
	exit(1);
}

void div_err(int sig)
{
	printf("\nDIv by 0 error %d\n",sig);
	exit(1);
}
\end{lstlisting}

\begin{lstlisting}
#include <signal.h>
#include <stdio.h>

int main()
{
	signal(SIGINT, SIG_IGN);
	while(1);
}
\end{lstlisting}

\begin{lstlisting}
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>

void _alarm(int);

int main()
{
	signal(SIGALRM, _alarm);
	alarm(3);
	sleep(10);
}

void _alarm(int x)
{
	printf("ALARM\n");
	exit(1);
}
\end{lstlisting}

\textit{Output.}
\begin{lstlisting}

\end{lstlisting}

\end{document}
%\grid\grid
\grid
